<div>
  <!--<h2 translate>search</h2>-->
  <div ng-if="headerTemplateUrl" ng-include="headerTemplateUrl"></div>

  <obiba-alert id="SearchController"></obiba-alert>

  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist" ng-if="tabs && tabs.length>1">
    <li ng-repeat="tab in tabs" role="presentation" ng-class="{ active: tab === lang }"><a href role="tab"
      ng-click="setLocale(tab)">{{'language.' + tab | translate}}</a></li>
  </ul>

  <!-- Classifications region -->
  <div class="{{tabs && tabs.length>1 ? 'tab-content voffset4' : ''}}">
    <!--<div>-->
    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6">
        <script type="text/ng-template" id="customTemplate.html">
          <a ng-if="match.model.id">
            <span title="{{match.model.target + '-classifications' | translate}}">
              <i class="{{'i-obiba-' + match.model.target}}"></i>
            </span>
            <span
              uib-popover-html="match.model.itemDescription | uibTypeaheadHighlight:query"
              popover-title="{{match.model.itemTitle}}"
              popover-placement="bottom"
              popover-trigger="mouseenter"
              ng-bind-html="match.model.itemTitle | uibTypeaheadHighlight:query">
            </span>
            <small class="help-block no-margin hoffset3" title="{{match.model.itemParentDescription}}">
              {{match.model.itemParentTitle}}
            </small>
          </a>
          <a ng-if="!match.model.id" class="{{match.model.status}}">
            <small class="help-block no-margin">
              {{match.model.message}}
            </small>
          </a>
        </script>
        <a href>
        <span class="input-group input-group-sm no-padding-top">
          <input type="text" ng-model="selectedCriteria" placeholder="{{'search.placeholder' | translate}}"
            uib-typeahead="criteria for criteria in searchCriteria($viewValue)"
            typeahead-min-length="2"
            typeahead-loading="documents.search.active"
            typeahead-template-url="customTemplate.html"
            typeahead-on-select="selectCriteria($item)"
            class="form-control">
          <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
        </span>
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3"></div>
      <div class="col-md-6">
        <ul class="nav nav-pills">
          <li ng-repeat="t in taxonomyTabsOrder" ng-class="{'active': taxonomies.target === t && taxonomiesShown}"
              title="{{t + '-classifications' | translate}}">
            <a ng-click="selectTaxonomyTarget(t)">{{taxonomyTypeMap[t] | translate}}</a>
          </li>
        </ul>
      </div>
    </div>
    <div id="taxonomies" class="collapse">
      <div ng-include="'search/views/classifications/taxonomies-view.html'" class="voffset2"></div>
    </div>
  </div>

  <!-- Search criteria region -->
  <div class="row">
    <div class="col-md-12">
      <div criteria-root item="search.criteria" query="search.query" on-remove="removeCriteriaItem"
        on-refresh="refreshQuery"></div>
    </div>
  </div>


  <!-- Results region -->
  <div class="voffset3" ng-if="search.query">
    <result-panel display="search.display"
      type="search.type"
      bucket="search.bucket"
      query="search.executedQuery"
      result="search.result"
      loading="search.loading"
      on-type-changed="onTypeChanged"
      on-bucket-changed="onBucketChanged"
      on-paginate="onPaginate"
      lang="lang"></result-panel>
  </div>
</div>